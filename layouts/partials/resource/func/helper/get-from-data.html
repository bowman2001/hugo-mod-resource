{{- $data := .data }}
{{- $ctx := .ctx }}
{{- $errorLevel := .errorLevel }}

{{- $map := "" }}
{{- if (in (slice "yaml" "toml" "json") $data.MediaType.SubType ) }}
    {{- $params := transform.Unmarshal $data }}
    {{- $url := urls.Parse $params.src }} 
    {{- $args := dict "url" $url "ctx" $ctx "errorLevel" $errorLevel }}
    {{- $r := partialCached "resource/func/get" $args $args }}
    {{- $map = dict "r" $r "params" $params }}
{{- end }}

{{- return $map }}